<!DOCTYPE html>
<html lang="en">
    <head>
        <title>{{appTitle}}</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" type="text/css" href="/css/style.css">
        <script src="/js/qrcode.js"></script>
        <script>
            var raw = `{{list.content}}`;
            function copyContent(id) {
                const input = document.getElementById(id);
                input.style.display = "block";
                input.select();
                input.setSelectionRange(0,999999999);
                document.execCommand("copy");
                input.style.display = "none";
                window.alert("Text copied.");
            }
            function drawCanvas() {
                const canvas = document.getElementById("qr-code");
                QRCode.toCanvas(canvas, 'http://{{server}}/{{link.uid}}', (error) => {
                    if(error) console.error(error);
                });
            }
            function setupDownloadLink() {
                var link = document.getElementById("download");
                const text = document.getElementById("hidden-content").value;
                var file = new Blob([text], {"type": "text/plain"});
                link.href = URL.createObjectURL(file);
                link.download = `{{link.uid}}.txt`;
            }
            function init() {
                drawCanvas();
                setupDownloadLink();
            }
        </script>
    </head>
    <body {{#link}}class="link" onload="init()"{{/link}}>
        <header>
            <a id="title" href="http://{{server}}">
                <img src="/images/logo.png"/>
                <h1>Raviolink</h1>
            </a>
            <p id="subtitle">Share shortened URLs, text and code.</p>
        </header>
